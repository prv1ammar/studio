{
    "nodes": [
        {
            "id": "node_chat_input",
            "type": "agentNode",
            "position": {
                "x": 100,
                "y": 200
            },
            "data": {
                "id": "chatInput",
                "label": "Chat Input",
                "category": "AI Services & Agents",
                "inputs": [],
                "outputs": [
                    {
                        "name": "message",
                        "display_name": "User Message",
                        "types": [
                            "Text"
                        ]
                    }
                ]
            }
        },
        {
            "id": "node_transcription",
            "type": "agentNode",
            "position": {
                "x": 400,
                "y": 200
            },
            "data": {
                "id": "transcriptionNode",
                "label": "Audio Transcription",
                "category": "AI Services & Agents",
                "inputs": [
                    {
                        "name": "audio_url",
                        "display_name": "Audio/Message Input",
                        "type": "handle",
                        "types": [
                            "Text"
                        ]
                    }
                ],
                "outputs": [
                    {
                        "name": "text",
                        "display_name": "Transcribed Text",
                        "types": [
                            "Text"
                        ]
                    }
                ]
            }
        },
        {
            "id": "node_python_decoder",
            "type": "agentNode",
            "position": {
                "x": 700,
                "y": 200
            },
            "data": {
                "id": "utilities_PythonREPLComponent",
                "label": "Python Interpreter",
                "category": "Tools & Utilities",
                "inputs": [
                    {
                        "name": "global_imports",
                        "display_name": "Global Imports",
                        "type": "text",
                        "default": "re,json"
                    },
                    {
                        "name": "input_value",
                        "display_name": "Input Data",
                        "type": "handle",
                        "types": [
                            "Text"
                        ]
                    },
                    {
                        "name": "python_code",
                        "display_name": "Python Code",
                        "type": "textarea",
                        "default": "import re, json\n# 'inputs' is the transcribed text\ntext = str(inputs)\nhas_id = bool(re.search(r'ID:\\s*(\\d+)', text, re.I))\nhas_url = 'http' in text.lower()\nprint(json.dumps({'text': text, 'has_id': has_id, 'has_url': has_url}))"
                    }
                ],
                "outputs": [
                    {
                        "name": "results",
                        "display_name": "Results",
                        "types": [
                            "Data"
                        ]
                    }
                ]
            }
        },
        {
            "id": "node_intent_router",
            "type": "agentNode",
            "position": {
                "x": 1000,
                "y": 200
            },
            "data": {
                "id": "liteLLM",
                "label": "LiteLLM (Router)",
                "category": "Tyboo",
                "inputs": [
                    {
                        "name": "input_data",
                        "display_name": "Input Text",
                        "type": "handle",
                        "types": [
                            "Text"
                        ]
                    },
                    {
                        "name": "model_name",
                        "display_name": "Model Name",
                        "type": "text",
                        "default": "gpt-4o-mini"
                    },
                    {
                        "name": "temperature",
                        "display_name": "Temperature",
                        "type": "number",
                        "default": 0
                    }
                ],
                "system_prompt": "Return only ONE word: RENTER, LISTER, or PARTNER.",
                "outputs": [
                    {
                        "name": "response",
                        "display_name": "Assistant Response",
                        "types": [
                            "Text"
                        ]
                    }
                ]
            }
        },
        {
            "id": "node_conditional",
            "type": "agentNode",
            "position": {
                "x": 1300,
                "y": 200
            },
            "data": {
                "id": "flow_controls_ConditionalRouter",
                "label": "Conditional Router",
                "category": "Logic & Flow",
                "inputs": [
                    {
                        "name": "input_text",
                        "display_name": "IN: Value to Check",
                        "type": "handle",
                        "types": [
                            "Message"
                        ]
                    },
                    {
                        "name": "match_text",
                        "display_name": "Match Text",
                        "type": "text",
                        "default": "RENTER"
                    },
                    {
                        "name": "operator",
                        "display_name": "Operator",
                        "type": "dropdown",
                        "default": "equals"
                    }
                ],
                "outputs": [
                    {
                        "name": "true_result",
                        "display_name": "True",
                        "types": [
                            "Message"
                        ]
                    },
                    {
                        "name": "false_result",
                        "display_name": "False",
                        "types": [
                            "Message"
                        ]
                    }
                ]
            }
        },
        {
            "id": "node_smartdb",
            "type": "agentNode",
            "position": {
                "x": 1600,
                "y": 0
            },
            "data": {
                "id": "storage_SmartDB",
                "label": "SmartDB",
                "category": "Storage",
                "inputs": [
                    {
                        "name": "query",
                        "display_name": "Query",
                        "type": "handle",
                        "types": [
                            "Text"
                        ]
                    },
                    {
                        "name": "project_id",
                        "display_name": "Project ID",
                        "type": "text",
                        "default": "pua15tlsanbmvtc"
                    }
                ],
                "outputs": [
                    {
                        "name": "data",
                        "display_name": "Data",
                        "types": [
                            "Tool"
                        ]
                    }
                ]
            }
        },
        {
            "id": "node_supabase",
            "type": "agentNode",
            "position": {
                "x": 1600,
                "y": 200
            },
            "data": {
                "id": "supabase_SupabaseVectorStore",
                "label": "Supabase",
                "category": "Vector Stores & Databases",
                "inputs": [
                    {
                        "name": "search_query",
                        "display_name": "Search Query",
                        "type": "text",
                        "types": [
                            "Text"
                        ]
                    },
                    {
                        "name": "table_name",
                        "display_name": "Table Name",
                        "type": "text",
                        "default": "property_vectors"
                    }
                ],
                "outputs": [
                    {
                        "name": "search_results",
                        "display_name": "Data",
                        "types": [
                            "Tool"
                        ]
                    }
                ]
            }
        },
        {
            "id": "node_brain_agent",
            "type": "agentNode",
            "position": {
                "x": 1900,
                "y": 200
            },
            "data": {
                "id": "langchainAgent",
                "label": "Universal Agent",
                "category": "Agents",
                "inputs": [
                    {
                        "name": "input_data",
                        "display_name": "User Input",
                        "type": "handle",
                        "types": [
                            "Text"
                        ]
                    },
                    {
                        "name": "llm",
                        "display_name": "LLM",
                        "type": "handle",
                        "types": [
                            "LLM"
                        ]
                    },
                    {
                        "name": "tools",
                        "display_name": "Tools",
                        "type": "handle",
                        "types": [
                            "Tool"
                        ]
                    }
                ],
                "agent_pattern": "planner",
                "system_prompt": "You are a professional real estate expert. Use tools to find properties.",
                "outputs": [
                    {
                        "name": "output",
                        "display_name": "Agent Response",
                        "types": [
                            "Text"
                        ]
                    }
                ]
            }
        },
        {
            "id": "node_llm_power",
            "type": "agentNode",
            "position": {
                "x": 1900,
                "y": -100
            },
            "data": {
                "id": "liteLLM",
                "label": "LLM Provider (gpt-4o)",
                "category": "Models",
                "inputs": [
                    {
                        "name": "model_name",
                        "display_name": "Model Name",
                        "type": "text",
                        "default": "gpt-4o"
                    }
                ],
                "outputs": [
                    {
                        "name": "response",
                        "display_name": "Language Model",
                        "types": [
                            "LLM"
                        ]
                    }
                ]
            }
        },
        {
            "id": "node_chat_output",
            "type": "agentNode",
            "position": {
                "x": 2200,
                "y": 200
            },
            "data": {
                "id": "chatOutput",
                "label": "Chat Output",
                "category": "AI Services & Agents",
                "inputs": [
                    {
                        "name": "output_message",
                        "display_name": "Output Message",
                        "type": "handle",
                        "types": [
                            "Text"
                        ]
                    }
                ],
                "outputs": []
            }
        },
        {
            "id": "node_scraper",
            "type": "agentNode",
            "position": {
                "x": 1600,
                "y": 500
            },
            "data": {
                "id": "scrapegraph_ScrapeGraphSmartScraperApi",
                "label": "ScrapeGraph",
                "category": "Search & Scraping",
                "inputs": [
                    {
                        "name": "url",
                        "display_name": "URL",
                        "type": "handle",
                        "types": [
                            "Text",
                            "Message"
                        ]
                    },
                    {
                        "name": "prompt",
                        "display_name": "Prompt",
                        "type": "text",
                        "default": "Extract price, bedroom count, location, and image URLs."
                    }
                ],
                "outputs": [
                    {
                        "name": "data",
                        "display_name": "Data",
                        "types": [
                            "Data"
                        ]
                    }
                ]
            }
        }
    ],
    "edges": [
        {
            "id": "e1",
            "source": "node_chat_input",
            "sourceHandle": "message",
            "target": "node_transcription",
            "targetHandle": "audio_url"
        },
        {
            "id": "e2",
            "source": "node_transcription",
            "sourceHandle": "text",
            "target": "node_python_decoder",
            "targetHandle": "input_value"
        },
        {
            "id": "e3",
            "source": "node_python_decoder",
            "sourceHandle": "results",
            "target": "node_intent_router",
            "targetHandle": "input_data"
        },
        {
            "id": "e4",
            "source": "node_intent_router",
            "sourceHandle": "response",
            "target": "node_conditional",
            "targetHandle": "input_text"
        },
        {
            "id": "e5",
            "source": "node_conditional",
            "sourceHandle": "true_result",
            "target": "node_smartdb",
            "targetHandle": "query"
        },
        {
            "id": "e6",
            "source": "node_conditional",
            "sourceHandle": "true_result",
            "target": "node_supabase",
            "targetHandle": "search_query"
        },
        {
            "id": "e7",
            "source": "node_conditional",
            "sourceHandle": "true_result",
            "target": "node_brain_agent",
            "targetHandle": "input_data"
        },
        {
            "id": "e8",
            "source": "node_llm_power",
            "sourceHandle": "response",
            "target": "node_brain_agent",
            "targetHandle": "llm"
        },
        {
            "id": "e9",
            "source": "node_smartdb",
            "sourceHandle": "data",
            "target": "node_brain_agent",
            "targetHandle": "tools"
        },
        {
            "id": "e10",
            "source": "node_supabase",
            "sourceHandle": "search_results",
            "target": "node_brain_agent",
            "targetHandle": "tools"
        },
        {
            "id": "e11",
            "source": "node_brain_agent",
            "sourceHandle": "output",
            "target": "node_chat_output",
            "targetHandle": "output_message"
        },
        {
            "id": "e12",
            "source": "node_conditional",
            "sourceHandle": "false_result",
            "target": "node_scraper",
            "targetHandle": "url"
        }
    ]
}